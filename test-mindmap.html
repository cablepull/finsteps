<!doctype html>
<html>
<head>
  <title>Mindmap Test</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js"></script>
</head>
<body>
  <div id="diagram"></div>
  <script>
    mermaid.initialize({ startOnLoad: false, theme: "dark" });
    
    const mermaidText = `mindmap
  root((Root))
    Topic_A
      Sub_1
      Sub_2
    Topic_B
      Sub_3
      Sub_4`;
    
    (async () => {
      const { svg } = await mermaid.render('test-diagram', mermaidText);
      document.getElementById('diagram').innerHTML = svg;
      
      const svgEl = document.querySelector('svg');
      
      // Log all elements with IDs
      const allIds = Array.from(svgEl.querySelectorAll('[id]')).map(el => ({
        id: el.getAttribute('id'),
        tag: el.tagName,
        class: el.getAttribute('class'),
        textContent: el.textContent?.trim().substring(0, 40)
      }));
      console.log('All elements with IDs:', JSON.stringify(allIds, null, 2));
      
      // Log all text elements
      const allText = Array.from(svgEl.querySelectorAll('text')).map(el => ({
        text: el.textContent?.trim(),
        class: el.getAttribute('class'),
        id: el.getAttribute('id'),
        parent: el.parentElement?.tagName,
        parentClass: el.parentElement?.getAttribute('class'),
        parentId: el.parentElement?.getAttribute('id')
      }));
      console.log('All text elements:', JSON.stringify(allText, null, 2));
      
      // Log all g elements with data-id
      const allDataIds = Array.from(svgEl.querySelectorAll('[data-id]')).map(el => ({
        dataId: el.getAttribute('data-id'),
        tag: el.tagName,
        class: el.getAttribute('class')
      }));
      console.log('All elements with data-id:', JSON.stringify(allDataIds, null, 2));
    })();
  </script>
</body>
</html>
